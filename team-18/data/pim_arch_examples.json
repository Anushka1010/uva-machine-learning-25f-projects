{
  "schema_version": "1.1",
  "examples_db": [
    {
      "db_id": "archA_examples",
      "architecture": {
        "type": "h_layout_subarray_level_pim",
        "architecture_explanation": "H-layout subarray-level PIM. Operands are read from DRAM rows into row registers and results are written back to DRAM. Word size is 32-bit; shifts truncate out-of-range bits.",
        "word_size_bits": 32,
        "shift_semantics": "logical_shifts_truncate_out_of_range_bits",
        "compute": {
          "logic_operations": [
            "NOR"
          ]
        },
        "row_register_file": {
          "count": 4,
          "naming": [
            "RR0",
            "RR1",
            "RR2",
            "RR3"
          ]
        },
        "data_movement": {
          "freedom": "restricted",
          "rules": [
            "RR->RR moves allowed only within the same subarray",
            "No direct RR->DRAM row move",
            "DRAM rows can be read into and written from RR0 only",
            "RR0 may swap with any RRi",
            "Logic ops take RR0 and RR1 as operands; result is written to RR0"
          ]
        }
      },
      "isa": {
        "operations": [
          "ReadRowToSa(dram_row)     // DRAM row -> RR0",
          "WriteSaToRow(dram_row)    // RR0 -> DRAM row",
          "Swap(rr_index)            // swap RR0 <-> RR[rr_index]",
          "Nor()                     // RR0 := ~(RR0 | RR1)"
        ]
      },
      "items": [
        {
          "id": "ex_nor_rows",
          "task": {
            "name": "nor_rows",
            "bitwidth": 32,
            "inputs": [
              {
                "name": "A",
                "location": {
                  "type": "dram_row",
                  "id": "ROW1"
                }
              },
              {
                "name": "B",
                "location": {
                  "type": "dram_row",
                  "id": "ROW2"
                }
              }
            ],
            "outputs": [
              {
                "name": "OUT",
                "location": {
                  "type": "dram_row",
                  "id": "ROW3"
                }
              }
            ]
          },
          "program": [
            {
              "step": 1,
              "op": "ReadRowToSa",
              "args": {
                "dram_row": "ROW1"
              }
            },
            {
              "step": 2,
              "op": "Swap",
              "args": {
                "rr_index": 1
              }
            },
            {
              "step": 3,
              "op": "ReadRowToSa",
              "args": {
                "dram_row": "ROW2"
              }
            },
            {
              "step": 4,
              "op": "Nor",
              "args": {}
            },
            {
              "step": 5,
              "op": "WriteSaToRow",
              "args": {
                "dram_row": "ROW3"
              }
            }
          ],
          "correctness": {
            "is_correct": true,
            "evidence": {
              "method": "provided_by_user",
              "details": "Reference example."
            }
          }
        }
      ]
    }
  ],
  "query": {
    "query_id": "q_nor_rows_false_missing_preserve_A",
    "architecture": {
      "type": "h_layout_subarray_level_pim",
      "architecture_explanation": "H-layout subarray-level PIM. Operands are read from DRAM rows into row registers and results are written back to DRAM. Word size is 32-bit; shifts truncate out-of-range bits.",
      "word_size_bits": 32,
      "shift_semantics": "logical_shifts_truncate_out_of_range_bits",
      "compute": {
        "logic_operations": [
          "NOR"
        ]
      },
      "row_register_file": {
        "count": 4,
        "naming": [
          "RR0",
          "RR1",
          "RR2",
          "RR3"
        ]
      },
      "data_movement": {
        "freedom": "restricted",
        "rules": [
          "RR->RR moves allowed only within the same subarray",
          "No direct RR->DRAM row move",
          "DRAM rows can be read into and written from RR0 only",
          "RR0 may swap with any RRi",
          "Logic ops take RR0 and RR1 as operands; result is written to RR0"
        ]
      }
    },
    "isa": {
      "operations": [
        "ReadRowToSa(dram_row)     // DRAM row -> RR0",
        "WriteSaToRow(dram_row)    // RR0 -> DRAM row",
        "Swap(rr_index)            // only rr_index in {1,2} allowed",
        "NOR()                     // RR0 := ~(RR0 | RR1)"
      ]
    },
    "item": {
      "id": "q_item_001",
      "task": {
        "name": "nor_rows",
        "bitwidth": 32,
        "inputs": [
          {
            "name": "A",
            "location": {
              "type": "dram_row",
              "id": "ROW10"
            }
          },
          {
            "name": "B",
            "location": {
              "type": "dram_row",
              "id": "ROW11"
            }
          }
        ],
        "outputs": [
          {
            "name": "OUT",
            "location": {
              "type": "dram_row",
              "id": "ROW12"
            }
          }
        ]
      },
      "program": [
        {
          "step": 1,
          "op": "ReadRowToSa",
          "args": {
            "dram_row": "ROW10"
          },
          "comment": "RR0 <- A"
        },
        {
          "step": 2,
          "op": "ReadRowToSa",
          "args": {
            "dram_row": "ROW11"
          },
          "comment": "RR0 <- B (overwrites A)"
        },
        {
          "step": 3,
          "op": "Nor",
          "args": {},
          "comment": "RR1 never loaded with A"
        },
        {
          "step": 4,
          "op": "WriteSaToRow",
          "args": {
            "dram_row": "ROW12"
          },
          "comment": "OUT <- RR0"
        }
      ],
      "correctness": {
        "is_correct": false,
        "evidence": {
          "method": "static_check",
          "details": "A is overwritten before being saved to RR1; RR1 is uninitialized."
        }
      }
    }
  }
}